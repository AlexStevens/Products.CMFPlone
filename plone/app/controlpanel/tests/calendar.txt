Calendar control panel
======================

First some initial setup code:

    >>> ctool = self.getToolByName('portal_calendar')
    >>> self.loginAsRoot()


Viewing the calendar control panel
----------------------------------

    >>> self.browser.open('http://nohost/plone/@@calendar-controlpanel.html')
    >>> self.browser.url
    'http://nohost/plone/@@calendar-controlpanel.html'

Click the save button without making any changes:

    >>> self.browser.getControl(name="form.actions.save").click()
    >>> self.browser.url
    'http://nohost/plone/%40%40calendar-controlpanel.html'

We should get a status message:

    >>> 'No changes done.' in self.browser.contents
    True

Now click the cancel button:

    >>> self.browser.getControl(name="form.actions.cancel").click()
    >>> self.browser.url
    'http://nohost/plone/%40%40calendar-controlpanel.html'

There should be still no changes:

    >>> 'Changes canceled.' in self.browser.contents
    True

Make some changes
-----------------

    >>> self.browser.open('http://nohost/plone/@@calendar-controlpanel.html')
    >>> self.browser.url
    'http://nohost/plone/@@calendar-controlpanel.html'

    >>> self.browser.getControl(name='form.firstweekday').value = ['Sunday']
    >>> self.browser.getControl(name='form.calendar_types:list').value = ['Event', 'Page']

Click the save button:

    >>> self.browser.getControl(name="form.actions.save").click()
    >>> self.browser.url
    'http://nohost/plone/%40%40calendar-controlpanel.html'

We should be informed that something has changed:

    >>> 'Changes saved.' in self.browser.contents
    True

Make sure the changes have been applied correctly to the tool:

    >>> ctool.calendar_types
    ('Event', 'Document')

    >>> ctool.firstweekday
    6
